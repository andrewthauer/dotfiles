#!/usr/bin/env bash
#
# description:
#   Installs or updates a Vim 8 native package
#
# usage:
#   vim-pack vim-scripts/Zenburn
#

# Plugin directories
VIM_DIR="${DOTFILES_DIR}/vim"
VIM_PACK_DIR="${VIM_DIR}/pack/default"

install_vim_plugin() {
  repo="$1"
  IFS='/'; arr=($repo); unset IFS;
  plugin="${arr[1]}"
  pack_start_dir="${VIM_PACK_DIR}/start"
  plugin_dir="${pack_start_dir}/${plugin}"

  if [ ! -d "${plugin_dir}" ]; then
    echo "Installing ${plugin} ..."
    git clone "https://github.com/${repo}" "${plugin_dir}"
  else
    echo "Updating ${plugin} ..."
    git -C ${plugin_dir} pull
  fi
}

# Ensure directories exist
mkdir -p "${VIM_PACK_DIR}/opt"
mkdir -p "${VIM_PACK_DIR}/start"

# Install or update the argument
install_vim_plugin $1
